## Event Ticketing SaaS ‚Äî Unified Project Plan

**Project:** Advanced Web Tech ‚Äì Event Ticketing SaaS Platform  
**Owner:** `<your name>`  
**Created:** 2025-10-20  
**Last Updated:** 2025-01-27

### Summary
- Build a single-version, multi-tenant event ticketing SaaS with clean separation between a Next.js frontend and NestJS backend.
- Focus: organizers create branded event pages, sell tickets, handle checkout, and run QR-based check-in.
- Key capabilities: organizer workspaces, SEO-friendly event pages, secure checkout, QR e-tickets, mobile check-in, dashboards, tenant-level data isolation.

### Tech Stack
- Frontend: Next.js 16 (TypeScript, App Router), Tailwind CSS 4, React 19.2, Axios.
- Backend: NestJS 11 (TypeScript), REST API, class-validator/transformer, TypeORM (PostgreSQL).
- Infra: PostgreSQL, JWT auth (HttpOnly cookies), Stripe payments, email provider TBD (SendGrid/AWS SES/Resend).

### 1. Vision & Overview
- Serve organizers, staff, and attendees end-to-end: event creation ‚Üí checkout ‚Üí QR scan ‚Üí reporting.
- Multi-tenant isolation is mandatory (every table keyed by `tenant_id`).
- Target users:
  - **Organizers/TenantAdmins:** manage tenants, events, pricing, discounts, reporting.
  - **Staff:** run check-in, support attendees.
  - **Attendees:** browse, purchase, view tickets.

### 2. Functional Requirements
- Organizer & Team Management: create tenant, invite TenantAdmins/staff, basic branding (logo/colors).
- Events: draft/publish/archive; details (name, slug, description, venue, dates, timezone, is_public); SEO/meta.
- Ticket Types & Inventory: multiple tiers; price/currency; quantity_total; prevent oversell.
- Checkout & Orders: pending ‚Üí paid; idempotent updates; order details (buyer email, total, items).
- Tickets & QR Codes: one ticket per unit; unique QR payload; email delivery; validation rules.
- Check-in App: camera scanning; invalid/duplicate handling; real-time status; simple offline-tolerant UI.
- Dashboard & Reporting: revenue, units sold, orders/attendees list; CSV export.

### 3. User Roles & Access Control
- Roles per tenant: admin, TenantAdmin, staff, user  
- Access scope:
  - admin/TenantAdmin: full tenant configuration, events, ticketing, reports.
  - Staff: check-in access and limited views.
  - Public: read-only event page and checkout.

### 4. Multi-Tenancy & Data Isolation
- Tenancy Model: row-level tenancy using tenant_id across all domain tables; composite uniqueness (tenant_id, slug).
- Enforcement: tenant scoping in all queries and service logic; option to add DB-level row security later.
- Branding: per-tenant settings (logo, color); future subdomain mapping.

### 5. Information Architecture & Flows
- Public:
  - Event Page (by slug) ‚Üí Checkout ‚Üí Order Confirmation ‚Üí Ticket Email.
- Organizer Portal:
  - Dashboard ‚Üí Events (list/create/edit) ‚Üí Ticket Types ‚Üí Orders/Attendees ‚Üí Exports.
- Check-in:
  - Select Event ‚Üí Camera Scan ‚Üí Validate Ticket ‚Üí Mark Attendance.

### 6. Conceptual Data Model
- Tenant (organizer)
- User (tenant_id, role)
- Event (tenant_id, slug, dates, venue, is_public)
- TicketType (event_id, price, currency, inventory)
- Order (tenant_id, event_id, buyer_email, total, status, payment_ref)
- Ticket (order_id, ticket_type_id, attendee_name/email, qr_code, checked_in_at)
- DiscountCode (event_id, code, limits, redemptions) [later]
- WebhookEvent (provider, type, payload, processed_at)

### 7. Conceptual API Surface
- Auth: login, logout, me.
- Tenants: create, invite user, list members.
- Events: list/create/update/publish/archive.
- Ticket Types: create/update/list per event.
- Checkout: create payment session/intention; webhook listener.
- Orders: list/search; details; exports.
- Tickets: list per event; check-in endpoint.
- Public: event page data by slug.

### 8. Non-Functional Requirements
- Performance: public pages ‚â§ 1.5s TTFB under normal load; smooth camera scanning.
- Scalability: handle launch spikes and doors-open check-ins.
- Internationalization: base English; multi-currency later.
- Browser support: evergreen; mobile Safari/Chrome.

### 9. Security & Compliance
- Auth: JWT in HttpOnly cookies; role-based access.
- QR Security: signed payload or lookup token; one-scan rule (checked_in_at must be null before scan).
- Rate Limiting: checkout, check-in, login.
- Data Protection: tenant scoping; minimal PII; backups and restore plan.
- Compliance (later): PCI via payment provider; privacy policy and ToS.

### 10. Payments & Payouts
- Payments: start with a single provider (e.g., Stripe) for card payments.
- Refunds: manual flow initially; note in system.
- Payouts: begin manual to organizers; consider automated connect-style payouts later.
- Webhooks: verified signatures; idempotent processing; store events for replay.

### 11. Email & Notifications
- Transactional emails: order confirmation with tickets (QR), event updates, staff invites/password flows.
- Deliverability: dedicated sender domain; DKIM/SPF; suppression handling.
- Templates: reusable and tenant-branded.

### 12. Analytics & Observability
- Product analytics: page views (public pages), basic conversion funnel.
- Business analytics: revenue per event, tickets sold over time.
- Monitoring: uptime for public pages and check-in; structured logs for webhooks/orders/check-ins.

### 13. Accessibility & UX
- Mobile-first for public pages and check-in.
- WCAG-aligned components; keyboard navigation; color contrast.
- Performance-focused media and page rendering.

### 14. Deliverables (University Portfolio)
- Documentation:
  - This project plan (updated as scope evolves).
  - System architecture diagram (high-level components and data flow).
  - ERD of conceptual data model.
  - API contract (endpoint list with request/response examples).
  - Test plan: scenarios for checkout, QR validation, check-in edge cases.
- Demonstration Assets:
  - Sample organizer account with 1‚Äì2 events.
  - Public event page, live checkout in test mode, example tickets.
  - Screen-recorded demo: checkout to QR scan to check-in.

### 15. Roadmap
- Core Build: deliver functional requirements across sections 2‚Äì7.
- Future Enhancements: discount codes, reserved seating, automated payouts, public organizer profiles, integrations.

### 16. Risks & Mitigations
- Payment/checkout complexity ‚Üí minimize options; robust webhook handling.
- Overbuilding advanced features ‚Üí defer non-essential features; validate with users first.
- Venue connectivity issues ‚Üí lightweight check-in; device pre-check guidance; manual fallback.

### 17. Current Project Status
- ‚úÖ Basic Next.js frontend scaffolded (App Router, Tailwind CSS 4.0, TypeScript)
- ‚úÖ Basic NestJS backend scaffolded (v11.0.1, TypeScript, Express platform)
- ‚úÖ ESLint and Prettier configured for both projects
- ‚úÖ Basic project structure established
- ‚ùå Database connection not yet configured
- ‚ùå TypeORM not yet installed/configured
- ‚ùå Authentication system not implemented
- ‚ùå Event ticketing domain models not created
- ‚ùå Payment integration not implemented
- ‚ùå Email service not configured
- ‚ùå QR code generation not implemented

### 18. Next Priority Tasks
- [ ] Install and configure TypeORM with PostgreSQL
- [ ] Set up Docker Compose with PostgreSQL + Adminer
- [ ] Create database entities for event ticketing (Tenant, User, Event, TicketType, Order, Ticket)
- [ ] Implement JWT authentication with role-based access control
- [ ] Create basic CRUD APIs for events and ticket management
- [ ] Set up Axios in frontend for API communication
- [ ] Implement multi-tenant data isolation
- [ ] Add Stripe payment integration
- [ ] Set up email service for ticket delivery
- [ ] Create QR code generation and validation system

### 19. Technical Architecture Decisions
- ‚úÖ Frontend: Next.js 16.0.0 with App Router (confirmed)
- ‚úÖ Backend: NestJS 11.0.1 with TypeScript (confirmed)
- ‚úÖ Styling: Tailwind CSS 4.0 (confirmed)
- ‚úÖ Data Fetching: Axios (confirmed)
- ‚úÖ Database: PostgreSQL with TypeORM (confirmed)
- ‚úÖ Authentication: JWT in HttpOnly cookies (confirmed)
- üîÑ Payment Provider: Stripe (to be implemented)
- üîÑ Email Service: TBD (SendGrid/AWS SES)

### 20. Open Questions / Decisions
- Q: Hosting choice for API (Render/Railway/Fly)?
- Q: Email service provider (SendGrid vs AWS SES vs Resend)?
- Q: QR code library choice (qrcode vs react-qr-code)?
- Decision: Multi-tenant architecture with row-level tenancy using tenant_id

### 21. Deliverables Checklist
- Project plan (this document) kept current.
- Architecture diagram, ERD, API contract, and test plan covering checkout, QR validation, and check-in flows.
- Demo assets: sample tenant with events, working public page + checkout (test mode), exported tickets, and a short screen recording from purchase to QR scan.
